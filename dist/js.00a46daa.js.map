{"version":3,"sources":["js/redditapi.js","js/index.js"],"names":["search","searchTerm","searchLimit","sortBy","fetch","then","res","json","data","children","map","catch","err","console","log","searchForm","document","getElementById","searchInput","addEventListener","e","value","querySelector","showMessage","reddit","results","output","forEach","post","image","preview","images","source","url","title","truncateText","selftext","permalink","subreddit","score","innerHTML","preventDefault","message","className","div","createElement","appendChild","createTextNode","searchContainer","insertBefore","setTimeout","remove","text","limit","shortened","indexOf","substring"],"mappings":"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","file":"js.00a46daa.js","sourceRoot":"..","sourcesContent":["export default {\n    search: function(searchTerm, searchLimit, sortBy){\n        return fetch(`http://www.reddit.com/search.json?q=${searchTerm}&sort=${sortBy}&limit=${searchLimit}`)\n        .then(res => res.json())\n        .then(data => data.data.children.map(data => data.data)).catch(err => console.log(err));\n    }\n};","import reddit from './redditapi.js';\n\n\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\n\n// Form Event Listener\nsearchForm.addEventListener('submit', e => {\n    // Get search term\n    const searchTerm = searchInput.value;\n    console.log(searchTerm);\n    \n    // Get sort\n    const sortBy = document.querySelector('input[name=\"sortby\"]:checked').value;\n    console.log(sortBy);\n\n    // Get limit\n    const searchLimit = document.getElementById('limit').value;\n    console.log(searchLimit);\n\n    // Check Input\n    if(searchTerm === '') {\n        // Show message\n        showMessage('Please add a search term', 'alert-danger');\n    }\n\n    // Clear input\n    searchInput.value = '';\n\n    // Search Reddit\n    reddit.search(searchTerm, searchLimit, sortBy).then\n    (results => {\n        console.log(results);\n        let output = '<div class=\"card-columns\">';\n        // Loop through posts\n        results.forEach(post => {\n            // Check for image\n            let image = post.preview ? post.preview.images[0].source.url : \n            'https://cdn.comparitech.com/wp-content/uploads/2017/08/reddit-1.jpg';\n\n            output += `\n            <div class=\"card\">\n            <img class=\"card-img-top\" src=\"${image}\" alt=\"Card image cap\">\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">${post.title}</h5>\n              <p class=\"card-text\">${truncateText(post.selftext, 100)}</p>\n              <a href=\"${post.url}\" target=\"_blank\" class=\"btn btn-primary\">Read More</a>\n              <hr>\n              <a target=\"_blank\" href=\"https://www.reddit.com${post.permalink}\">/${post.subreddit}</a>\n              <span class=\"badge badge-dark\">Score: ${post.score} </span>\n            </div>\n          </div>\n        `;\n        });\n        output += '</div>';\n        document.getElementById('results').innerHTML = output;\n    });\n    e.preventDefault();\n});\n\n// Show Message\nfunction showMessage(message, className) {\n    // Create div\n    const div = document.createElement('div');\n    // Add classes\n    div.className = `alert ${className}`;\n    // Add text\n    div.appendChild(document.createTextNode(message));\n    // Get parent\n    const searchContainer = document.getElementById('search-container');\n    // Get search\n    const search = document.getElementById('search');\n\n    // Insert message\n    searchContainer.insertBefore(div, search);\n\n    // Timeout \n    setTimeout(() => document.querySelector('.alert').remove(), 3000);\n}\n\n// Truncate Text\nfunction truncateText(text, limit) {\n    const shortened = text.indexOf(' ',limit);\n    if(shortened == -1) return text;\n    return text.substring(0, shortened);\n}"]}